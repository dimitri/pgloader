language: common-lisp

install:
  - ./.travis.sh postgresql_uninstall
  - ./.travis.sh pgdg_repository
  - sudo apt-get install -y postgresql-9.1-ip4r unzip libsqlite3-dev gawk freetds-dev
  - ./.travis.sh postgresql_configure
  - ./.travis.sh sbcl_install

before_script:
  - PGUSER=postgres createuser -S -R -D -E -l pgloader
  - PGUSER=postgres createdb -E UTF8 -O pgloader pgloader
  - PGUSER=postgres psql -d pgloader -c "create extension ip4r;"
  - PGUSER=pgloader psql -d pgloader -c "create schema expected;"
  - PGUSER=pgloader psql -d pgloader -c "create schema err;"
  - make --version
  - make

script:
  - PGUSER=pgloader make check

notifications:
  email:
    - dim@tapoueh.org
